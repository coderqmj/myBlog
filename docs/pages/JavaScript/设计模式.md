## 一、发布者——订阅模式

- 定义一个事件对象Event，里面有两个方法，on代表订阅，emit代表发射
- on有两个参数，一个接受事件的关键字key，另一个该事件的回调函数，内部的作用就是查询对象里面是否有该关键字key属性，没有添加该属性，然后将传进来的回调函数push到obj[key]中
- emit的作用就是遍历key关键对应的回调函数，然后执行

```js
var Event = function() {
  this.obj = {}
}

Event.prototype.on = function(eventType, fn) {
  if (!this.obj[eventType]) {
    this.obj[eventType] = []
  }
  this.obj[eventType].push(fn)
}

Event.prototype.emit = function() {
  // 取出对应的key
  var eventType = Array.prototype.shift.call(arguments)
  var arr = this.obj[eventType]
  for (let i = 0; i < arr.length; i++) {
    arr[i].apply(arr[i], arguments)
  }
}

var ev = new Event()

ev.on('click', function(a) { // 订阅函数
  console.log(a) // 1
})

ev.emit('click', 1)          // 发布函数
```

